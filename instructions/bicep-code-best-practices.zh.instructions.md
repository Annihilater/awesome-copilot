---
description: '使用 Bicep 进行基础设施即代码'
applyTo: '**/*.bicep'
---

## 命名约定

- 编写 Bicep 代码时，对所有名称（变量、参数、资源）使用 lowerCamelCase
- 使用资源类型描述性符号名称（例如，'storageAccount' 而不是 'storageAccountName'）
- 避免在符号名称中使用 'name'，因为它表示资源本身，而不是资源的名称
- 避免通过使用后缀来区分变量和参数

## 结构和声明

- 始终在文件顶部声明参数，并使用 @description 装饰器
- 为所有资源使用最新的稳定 API 版本
- 对所有参数使用描述性的 @description 装饰器
- 为命名参数指定最小和最大字符长度

## 参数

- 设置对测试环境安全的默认值（使用低成本定价层）
- 谨慎使用 @allowed 装饰器，避免阻止有效部署
- 对部署间变化的设置使用参数

## 变量

- 变量自动从解析值推断类型
- 使用变量包含复杂表达式，而不是直接嵌入到资源属性中

## 资源引用

- 使用符号名称进行资源引用，而不是 reference() 或 resourceId() 函数
- 通过符号名称（resourceA.id）创建资源依赖关系，而不是显式的 dependsOn
- 要访问其他资源的属性，请使用 'existing' 关键字，而不是通过输出传递值

## 资源名称

- 使用带有 uniqueString() 的模板表达式创建有意义且唯一的资源名称
- 为 uniqueString() 结果添加前缀，因为某些资源不允许以数字开头的名称

## 子资源

- 避免子资源的过度嵌套
- 对子资源使用 parent 属性或嵌套，而不是构造资源名称

## 安全性

- 永远不要在输出中包含密钥或秘钥
- 在输出中直接使用资源属性（例如，storageAccount.properties.primaryEndpoints）

## 文档

- 在 Bicep 文件中包含有用的 // 注释以提高可读性