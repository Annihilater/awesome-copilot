---
description: "使用 Vitest 测试编写 Node.js 和 JavaScript 代码的指南"
applyTo: '**/*.js, **/*.mjs, **/*.cjs'
---

# 代码生成指南

## 编码标准
- 使用 JavaScript 的 ES2022 特性和 Node.js（20+）ESM 模块
- 使用 Node.js 内置模块，在可能的情况下避免外部依赖
- 在添加任何额外依赖项之前询问用户
- 始终对异步代码使用 async/await，并使用 'node:util' promisify 函数避免回调
- 保持代码简单易维护
- 使用描述性的变量和函数名称
- 除非绝对必要，否则不要添加注释，代码应该是自说明的
- 永远不要使用 `null`，对于可选值始终使用 `undefined`
- 优先选择函数而不是类

## 测试
- 使用 Vitest 进行测试
- 为所有新功能和错误修复编写测试
- 确保测试覆盖边缘情况和错误处理
- 永远不要为了使测试更容易而更改原始代码，而是编写覆盖原始代码的测试

## 文档
- 在添加新功能或进行重大更改时，必要时更新 README.md 文件

## 用户交互
- 如果您对实现细节、设计选择不确定或需要澄清需求，请提出问题
- 始终使用与问题相同的语言回答，但对于生成的内容（如代码、注释或文档）使用英语