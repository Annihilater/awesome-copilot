---
description: "全面的项目架构蓝图生成器，可分析代码库以创建详细的架构文档。自动检测技术栈和架构模式，生成可视化图表，记录实施模式，并提供可扩展的蓝图，以保持架构一致性并指导新开发。"
mode: "agent"
---

# 全面的项目架构蓝图生成器

## 配置变量

${PROJECT_TYPE="自动检测|.NET|Java|React|Angular|Python|Node.js|Flutter|其他"} <!-- 主要技术 -->
${ARCHITECTURE_PATTERN="自动检测|整洁架构|微服务|分层|MVVM|MVC|六边形|事件驱动|无服务器|单体|其他"} <!-- 主要架构模式 -->
${DIAGRAM_TYPE="C4|UML|流程图|组件图|无"} <!-- 架构图类型 -->
${DETAIL_LEVEL="高级|详细|全面|可实施"} <!-- 包含的详细程度 -->
${INCLUDES_CODE_EXAMPLES=true|false} <!-- 包含示例代码以说明模式 -->
${INCLUDES_IMPLEMENTATION_PATTERNS=true|false} <!-- 包含详细的实施模式 -->
${INCLUDES_DECISION_RECORDS=true|false} <!-- 包含架构决策记录 -->
${FOCUS_ON_EXTENSIBILITY=true|false} <!-- 强调扩展点和模式 -->

## 生成的提示

"创建一个全面的 'Project_Architecture_Blueprint.md' 文档，该文档将彻底分析代码库中的架构模式，作为维护架构一致性的权威参考。请使用以下方法：

### 1. 架构检测与分析

- ${PROJECT_TYPE == "自动检测" ? "通过检查以下内容来分析项目结构，以识别所有正在使用的技术栈和框架：
  - 项目和配置文件
  - 包依赖项和导入语句
  - 特定于框架的模式和约定
  - 构建和部署配置" : "专注于 ${PROJECT_TYPE} 特定的模式和实践"}
- ${ARCHITECTURE_PATTERN == "自动检测" ? "通过分析以下内容来确定架构模式：
  - 文件夹组织和命名空间
  - 依赖流和组件边界
  - 接口隔离和抽象模式
  - 组件之间的通信机制" : "记录 ${ARCHITECTURE_PATTERN} 架构的实现方式"}

### 2. 架构概述

- 提供对整体架构方法的清晰、简洁的解释
- 记录架构选择中明显的指导原则
- 识别架构边界以及如何强制执行它们
- 注意任何混合架构模式或标准模式的改编

### 3. 架构可视化

${DIAGRAM_TYPE != "无" ? `在多个抽象级别上创建 ${DIAGRAM_TYPE} 图：

- 显示主要子系统的高级架构概览图
- 显示关系和依赖关系的组件交互图
- 显示信息如何在系统中移动的数据流图
- 确保图表准确反映实际实现，而不是理论模式` : "根据实际代码依赖关系描述组件关系，提供清晰的文本解释：
- 子系统组织和边界
- 依赖方向和组件交互
- 数据流和过程序列"}

### 4. 核心架构组件

对于在代码库中发现的每个架构组件：

- **目的和职责**：

  - 架构中的主要功能
  - 解决的业务领域或技术问题
  - 边界和范围限制

- **内部结构**：

  - 组件内类/模块的组织
  - 关键抽象及其实现
  - 使用的设计模式

- **交互模式**：

  - 组件如何与其他组件通信
  - 暴露和使用的接口
  - 依赖注入模式
  - 事件发布/订阅机制

- **演进模式**：
  - 如何扩展组件
  - 变化点和插件机制
  - 配置和自定义方法

### 5. 架构分层与依赖关系

- 映射代码库中实现的分层结构
- 记录层之间的依赖规则
- 识别实现层分离的抽象机制
- 注意任何循环依赖或层违规
- 记录用于维护分离的依赖注入模式

### 6. 数据架构

- 记录领域模型结构和组织
- 映射实体关系和聚合模式
- 识别数据访问模式（存储库、数据映射器等）
- 记录数据转换和映射方法
- 注意缓存策略和实现
- 记录数据验证模式

### 7. 横切关注点实现

记录横切关注点的实现模式：

- **身份验证与授权**：

  - 安全模型实现
  - 权限强制执行模式
  - 身份管理方法
  - 安全边界模式

- **错误处理与弹性**：
  - 异常处理模式
